(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main-scanpayment"],{"23e5":function(a,t,e){"use strict";e.r(t);var i=e("7b07"),n=e.n(i);for(var o in i)"default"!==o&&function(a){e.d(t,a,(function(){return i[a]}))}(o);t["default"]=n.a},"5fa3":function(a,t,e){var i=e("24fb");t=i(!1),t.push([a.i,".popupCenter-box[data-v-3aaac1d6]{width:%?400?%;padding:%?40?%;text-align:center;-webkit-border-radius:%?20?%;border-radius:%?20?%}.scanpay-name-box[data-v-3aaac1d6]{padding-top:%?80?%;text-align:center}.scanpay-name[data-v-3aaac1d6]{font-size:%?40?%}.scanpay-tel[data-v-3aaac1d6]{font-size:%?38?%}.money-box[data-v-3aaac1d6]{margin-top:%?40?%;padding:0 %?60?%}.money-num-title[data-v-3aaac1d6]{color:#a3a3a3}.money-num[data-v-3aaac1d6]{display:inline-block;padding-top:%?30?%;padding-bottom:%?10?%;line-height:%?80?%;padding-left:%?20?%;font-size:%?38?%;width:%?500?%;border-bottom:%?2?% solid #a3a3a3}.money-icon[data-v-3aaac1d6]{display:inline-block;width:%?40?%;font-size:%?40?%;margin-right:%?20?%;font-weight:600;vertical-align:super}.next-btn[data-v-3aaac1d6]{height:%?80?%;width:%?600?%;text-align:center;margin:0 auto;line-height:%?80?%;-webkit-border-radius:%?80?% %?80?%;border-radius:%?80?% %?80?%;border:solid %?2?% #a3a3a3;\r\n\t\t/* background-color: #d71518; */color:#333}.next-btn-box[data-v-3aaac1d6]{margin-top:%?80?%}.consume-box[data-v-3aaac1d6]{width:100%;min-height:92vh;background-color:#f4f8fb;\r\n\t\t/* text-align: center; */padding-top:%?30?%}.consume-main[data-v-3aaac1d6]{background-color:#fff;width:%?700?%;\r\n\t\t/* height: 440upx; */margin:%?10?% auto;-webkit-border-radius:%?20?%;border-radius:%?20?%;padding:%?20?% 0;font-size:%?32?%;padding-bottom:%?60?%}.consume-yinlain[data-v-3aaac1d6]{width:%?80?%;height:%?60?%;vertical-align:middle}.consume-money[data-v-3aaac1d6]{line-height:%?60?%;width:%?640?%;padding:0 %?30?%}.cm-gm[data-v-3aaac1d6]{\r\n\t\t/* text-indent: 1em; */display:inline-block;width:%?270?%;padding-left:%?10?%}.cm-gp[data-v-3aaac1d6]{display:inline-block;width:%?280?%;text-align:right}.cm-feilv[data-v-3aaac1d6]{color:#a3a3a3;font-size:%?26?%;line-height:%?76?%;border-bottom:%?2?% solid #ebe7e7}.fl[data-v-3aaac1d6]{display:inline-block;width:%?290?%;padding-left:%?10?%}.sxf[data-v-3aaac1d6]{display:inline-block;width:%?300?%;text-align:right}.kq-select[data-v-3aaac1d6]{width:%?640?%;line-height:%?60?%\r\n\t\t/* padding-top: 60upx; */}.kq-select1[data-v-3aaac1d6]{padding-top:%?10?%;padding-bottom:%?40?%}.kq-title[data-v-3aaac1d6]{display:inline-block;font-size:%?24?%;width:%?100?%}.bank-head-img[data-v-3aaac1d6]{width:%?40?%;height:%?40?%;-webkit-border-radius:50%;border-radius:50%;\r\n\t\t/* line-height: 100upx; */vertical-align:middle}.con-bank-static[data-v-3aaac1d6]{display:inline-block;padding:0 %?20?%;line-height:%?50?%}.con-bank-name[data-v-3aaac1d6]{display:inline-block}.con-bank-type[data-v-3aaac1d6]{color:#a3a3a3}.loop-btn[data-v-3aaac1d6]{display:inline-block;width:%?160?%;text-align:right;font-size:%?30?%;color:#3cb4f1;\r\n\t\t/* line-height: 100upx; */vertical-align:middle}#cover[data-v-3aaac1d6]{position:absolute;left:0;top:0;background:rgba(0,0,0,.4);width:100%;  /*宽度设置为100%，这样才能使隐藏背景层覆盖原页面*/height:100%;filter:alpha(opacity=60);  /*设置透明度为60%*/opacity:.6;  /*非IE浏览器下设置透明度为60%*/display:block;z-Index:99}.bank-card-list[data-v-3aaac1d6]{width:%?710?%;\r\n\t\t/* height: 200upx; */background-color:#fff;position:absolute;bottom:0;padding:%?20?%;z-index:100}.esc-btn[data-v-3aaac1d6]{text-align:center;position:relative;color:#000;padding-bottom:%?20?%;border-bottom:%?2?% solid #e5e5e5}.close-btn[data-v-3aaac1d6]{position:absolute;left:%?20?%;color:#a3a3a3}.add-card[data-v-3aaac1d6]{position:absolute;right:%?20?%;color:#a3a3a3;font-size:%?28?%}.bank-card-item[data-v-3aaac1d6]{width:%?750?%;height:%?100?%;padding:%?20?% 0;border-bottom:%?2?% solid #e5e5e5}.bank-item-head[data-v-3aaac1d6]{width:%?100?%;height:%?100?%;vertical-align:bottom}.bank-card-name[data-v-3aaac1d6]{display:inline-block;margin-left:%?30?%}.popupCenter-box[data-v-3aaac1d6]{width:%?600?%;\r\n\t\t/* height: 200upx; */background-color:#fff;-webkit-border-radius:%?10?%;border-radius:%?10?%;padding:%?20?%}.popup-title[data-v-3aaac1d6]{text-align:center;font-size:%?24?%}.popup-icon[data-v-3aaac1d6]{width:%?60?%;height:%?40?%}.popup-warning[data-v-3aaac1d6]{font-size:%?20?%;color:red}.popup-name-status[data-v-3aaac1d6]{padding-left:%?20?%;display:inline-block;font-size:%?24?%;line-height:1em}.pupou-tongdao[data-v-3aaac1d6]{width:%?600?%;font-size:%?20?%;vertical-align:top;padding:%?20?% 0 %?20?% 0\r\n\t\t/* border-bottom: #A3A3A3 solid 2upx; */}.popup-td-item[data-v-3aaac1d6]{vertical-align:top;display:inline-block;width:%?300?%}.popup-btn-one[data-v-3aaac1d6],.popup-btn-two[data-v-3aaac1d6]{display:inline-block;width:%?300?%;text-align:center;font-size:%?24?%}..popup-btn-one[data-v-3aaac1d6]{color:#a3a3a3}.popup-btn-two[data-v-3aaac1d6]{color:red}.popup-btn-box[data-v-3aaac1d6]{padding:%?10?% 0}.card-input[data-v-3aaac1d6]{border-bottom:solid #a3a3a3 %?2?%;margin:0 auto;width:%?400?%}",""]),a.exports=t},"6d65":function(a,t,e){"use strict";var i=e("750c"),n=e.n(i);n.a},"750c":function(a,t,e){var i=e("5fa3");"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var n=e("4f06").default;n("506f81a8",i,!0,{sourceMap:!1,shadowMode:!1})},"7b07":function(a,t,e){"use strict";e("fb6a"),e("ac1f"),e("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={components:{},data:function(){return{scanVal:"",name:"",tel:"",moneyNum:"",paystatus:"",creditCardList:[],credit:"",popupMessage:"",tradable:!1,isClick:!0,isMerch:!1}},onLoad:function(a){this.scanVal=this.$Route.query.payname,this.scanVal?(this.tel=this.scanVal.split("?")[1].split("&")[0].split("=")[1],this.name=this.scanVal.split("?")[1].split("&")[1].split("=")[1],this.tel||uni.showToast({title:"请重新扫描二维码",mask:!0,icon:"none",duration:2e3})):(this.tel="",this.name=""),this.selectPhoneMerch(),this.getcredit()},methods:{serchMerch:function(a){11==this.tel.length&&this.selectPhoneMerch()},getTradable:function(){var a=this;uni.showLoading({title:"加载中",mask:!0}),uni.request({method:"POST",url:this.$baseUrl+"/api/v1/pri/my/getTradable",data:{cardId:this.credit.id,productType:"MAILING"},header:{token:uni.getStorageSync("token"),"Content-Type":"application/json"},success:function(t){0==t.data.code?"Y"==t.data.data?a.tradable=!0:"N"==t.data.data&&(a.tradable=!1,uni.showToast({title:"卡片不在交易日内",mask:!0,icon:"none",duration:2e3})):-1==t.data.code&&(a.popupMessage=t.data.msg,uni.showToast({title:a.popupMessage,mask:!0,icon:"none",duration:2e3}),a.tradable=!1)},fail:function(){uni.showToast({title:"请稍后重试",mask:!0,icon:"none",duration:2e3})},complete:function(){uni.hideLoading()}})},selectPhoneMerch:function(){var a=this;uni.request({method:"POST",url:this.$baseUrl+"/api/v1/pri/my/selectPhoneMerch",data:{phone:this.tel},header:{token:uni.getStorageSync("token"),"Content-Type":"application/json"},success:function(t){0==t.data.code?"SHOP"==t.data.data.merchType?(a.name=t.data.data.merchName,a.isMerch=!0):(a.isMerch=!1,a.popupMessage="未查询到商户信息，请重新扫码或输入",uni.showToast({title:a.popupMessage,mask:!0,icon:"none",duration:2e3})):-1==t.data.code&&(a.isMerch=!1,a.popupMessage=t.data.msg,uni.showToast({title:a.popupMessage,mask:!0,icon:"none",duration:2e3}))}})},getcredit:function(){var a=this;uni.request({method:"GET",url:this.$baseUrl+"/api/v1/pri/my/getUserCreditCard",data:{},header:{token:uni.getStorageSync("token"),"Content-Type":"application/json"},success:function(t){0==t.data.code?(a.creditCardList=t.data.data,a.creditCardList[0]?(a.credit=a.creditCardList[0],a.getTradable()):(a.popupMessage="未绑定信用卡",uni.showToast({title:a.popupMessage,mask:!0,icon:"none",duration:2e3}),a.$Router.push({name:"addcredit"}))):-1==t.data.code&&(a.popupMessage=t.data.msg,uni.showToast({title:a.popupMessage,mask:!0,icon:"none",duration:2e3}))}})},selectCredit:function(a){this.credit=a,this.getTradable(),this.closedia1()},ifClick:function(){setTimeout((function(){this.isClick=!0}),1e4)},open1:function(){this.$refs.popup1.open()},closedia1:function(a){this.$refs.popup1.close()},addcredit:function(){this.$refs.popup1.close(),this.$Router.push({name:"addcredit"})},buyBtn:function(){var a=this;return this.isMerch?this.isClick?(this.isClick=!1,this.ifClick(),void(this.moneyNum>=100&&this.moneyNum<5e4?(uni.showLoading({title:"加载中",mask:!0}),this.tradable?uni.request({method:"POST",url:this.$baseUrl+"/api/v1/pri/shop/customGeneralOrder",data:{userId:uni.getStorageSync("userId"),store:this.tel,creditId:this.credit.id,totalTransactionPrice:this.moneyNum},header:{token:uni.getStorageSync("token"),"Content-Type":"application/json"},success:function(t){0==t.data.code?(a.isClick=!0,a.popupMessage=t.data.data,a.moneyNum="",uni.showToast({title:a.popupMessage,mask:!0,icon:"none",duration:2e3,success:function(t){a.$Router.back(1)}})):-1==t.data.code&&(a.isClick=!0,a.popupMessage=t.data.msg,uni.showToast({title:a.popupMessage,mask:!0,icon:"none",duration:2e3}))},complete:function(){uni.hideLoading(),a.isClick=!0}}):this.getTradable()):(this.moneyNum<10||this.moneyNum>5e4)&&(this.isClick=!0,this.popupMessage="消费金额需大于100，小于50000",this.$refs.popup.open()))):(this.popupMessage="重复点击,请稍等",uni.showToast({title:this.popupMessage,mask:!0,icon:"none",duration:2e3}),!1):(this.popupMessage="未查询到商户信息",uni.showToast({title:this.popupMessage,mask:!0,icon:"none",duration:2e3}),!1)},changeMoney:function(){this.moneyNum=Math.floor(100*this.moneyNum)/100}},filters:{showCard:function(a){if(a)return a.slice(0,4)+"**********"+a.slice(-4)},showbankCard:function(a){if(a)return a.slice(-4)}}};t.default=i},"8cbc":function(a,t,e){"use strict";e.r(t);var i=e("c91d"),n=e("23e5");for(var o in n)"default"!==o&&function(a){e.d(t,a,(function(){return n[a]}))}(o);e("6d65");var s,d=e("f0c5"),c=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,"3aaac1d6",null,!1,i["a"],s);t["default"]=c.exports},c91d:function(a,t,e){"use strict";e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return i}));var i={uniIcons:e("73a6").default,uniPopup:e("714b").default},n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"scanpay-box"},[e("v-uni-view",{staticClass:"scanpay-name-box"},[e("v-uni-view",{staticClass:"scanpay-tel"},[e("v-uni-input",{staticClass:" input-num card-input scanpay-name",attrs:{type:"number",maxlength:"11",value:"",placeholder:"请输入商家手机号"},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.serchMerch()}},model:{value:a.tel,callback:function(t){a.tel=t},expression:"tel"}})],1),e("v-uni-view",{staticClass:"scanpay-name"},[a._v(a._s(a.name))])],1),e("v-uni-view",{staticClass:"money-box"},[e("v-uni-view",{staticClass:"money-num-title"},[a._v("支付金额：")]),e("v-uni-view",[e("v-uni-text",{staticClass:"money-icon"},[a._v("￥")]),e("v-uni-input",{staticClass:"money-num",attrs:{type:"digit",maxlength:"7",value:""},on:{blur:function(t){arguments[0]=t=a.$handleEvent(t),a.changeMoney.apply(void 0,arguments)}},model:{value:a.moneyNum,callback:function(t){a.moneyNum=t},expression:"moneyNum"}})],1)],1),e("v-uni-view",{staticClass:"money-box"},[e("v-uni-view",{staticClass:"kq-select"},[e("v-uni-text",{staticClass:"kq-title"},[a._v("信用卡：")]),e("v-uni-image",{staticClass:"bank-head-img",attrs:{src:a.credit.bankLogo}}),e("v-uni-text",{staticClass:"con-bank-name"},[a._v(a._s(a.credit.bank)+a._s(a._f("showbankCard")(a.credit.cardNo)))]),e("v-uni-view",{staticClass:"loop-btn",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.open1.apply(void 0,arguments)}}},[a._v("变更"),e("uni-icons",{staticStyle:{color:"#3cb4f1"},attrs:{type:"loop"}})],1)],1),e("v-uni-view",{staticClass:"next-btn next-btn-box",attrs:{type:""},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.buyBtn.apply(void 0,arguments)}}},[a._v("确认付款")])],1),e("uni-popup",{ref:"popup1",attrs:{type:"bottom"}},[e("v-uni-view",{staticClass:"bank-card-list"},[e("v-uni-view",{staticClass:"esc-btn"},[e("uni-icons",{staticClass:"close-btn",staticStyle:{"font-size":"50upx"},attrs:{type:"closeempty"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.closedia1.apply(void 0,arguments)}}}),a._v("选择信用卡"),e("v-uni-text",{staticClass:"add-card",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.addcredit.apply(void 0,arguments)}}},[a._v("添加")])],1),a._l(a.creditCardList,(function(t){return e("v-uni-view",{staticClass:"bank-card-item",on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.selectCredit(t)}}},[e("v-uni-image",{staticClass:"bank-item-head",attrs:{src:t.bankLogo,mode:""}}),e("v-uni-view",{staticClass:"bank-card-name"},[e("v-uni-text",[a._v(a._s(t.bank))]),e("v-uni-text",[a._v("\\n")]),e("v-uni-text",[a._v(a._s(a._f("showCard")(t.cardNo)))])],1)],1)}))],2)],1),e("uni-popup",{ref:"popup",attrs:{type:"center"}},[e("v-uni-view",{staticClass:"popupCenter-box"},[a._v(a._s(a.popupMessage))])],1)],1)},o=[]}}]);